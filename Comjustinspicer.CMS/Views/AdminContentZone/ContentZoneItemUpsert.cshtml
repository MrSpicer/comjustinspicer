@using Comjustinspicer.CMS.Data.Models
@model ContentZoneItemDTO

@{
    var isNew = Model.Id == Guid.Empty;
    ViewData["Title"] = isNew ? "Add Item to Zone" : "Edit Zone Item";
    var zoneId = ViewData["ZoneId"] as Guid? ?? Model.ContentZoneId;
    if (isNew)
    {
        Model.Id = Guid.NewGuid();
    }
}

<section class="section">
    <div class="container">
        <nav class="breadcrumb" aria-label="breadcrumbs">
            <ul>
                <li><a asp-controller="AdminContentZone" asp-action="Index">Content Zones</a></li>
                <li><a asp-controller="AdminContentZone" asp-action="Items" asp-route-zoneId="@zoneId">Items</a></li>
                <li class="is-active"><a href="#" aria-current="page">@(isNew ? "Add" : "Edit")</a></li>
            </ul>
        </nav>

        <h1 class="title">@ViewData["Title"]</h1>

        <form asp-controller="AdminContentZone" asp-action="SaveItem" method="post">
            @Html.AntiForgeryToken()

            <form-fields for="@Model" />

            <div class="field is-grouped mt-4">
                <div class="control">
                    <button class="button is-primary" type="submit">Save</button>
                </div>
                <div class="control">
                    <a asp-controller="AdminContentZone" asp-action="Items" asp-route-zoneId="@zoneId" class="button">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</section>
